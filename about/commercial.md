---
layout: default
---

И так... ой как я люблю это слово сочетание :D
Тут я опишу свой коммерческий опыт.

Про то, как я поливал цветочки около университета, я писал [тут](./index.html). А тут будет описаны все мои места работы, плюсы и минусы, причины ухода, и что я вынес из этого опыта.

И начнем мы чуть из далека - стажировка. Я по сей день не знаю считать это коммерческим опытом или нет, но деньги за это платили, и относительно не плохие.

# Стажировка в parallels

На самом деле по чесному это было отдельно подразделение, при [parallels](https://ru.wikipedia.org/wiki/Parallels), а не прям эта компания. Мы в этом подразделении игры делали. Как это было связано с этой компанией, я по сей день не знаю, но как-то было.

На самом деле игры были не совсем обычные - в них в обязательном порядке присутствовал какой-то раздел математики/физики, в достаточно углубленном виде. Я попал наверное на самую веселую игру - nanofootball. Суть игры простая - объедините чапаев с футболом, и получится nanofootball. То есть это пошаговая игра (но легко могла быть и реалтайм), где надо толкать свои фишки, чтобы забить специальную фишку мяч, в ворота противника. Чем-то напоминает еще аэрохокей, но только в который одновременно играю по 5 игрок с каждой стороны. Какая была математику в этой игре? В ней была реализована полноценная 2д физика, в которой фишки могли закручиваться, и двигаться соответственно не по прямой траектории. Не то чтобы прям нереализуемая задача, но в те времена физические движки обычно плохо еще справлялись с этой задачей в реальном времени. Тем более в игре были достаточно большие скорости.

Я попал в проект, когда он уже имел основной функционал - физика уже была, фишки можно было бить, геймплей какой-то да был. Первой моей задаче было - добавить магию. Не моя идея, ничего не знаю. Хотелось как-то разнообразить игру команде :) Какая была магия? Заморозка, ускорение, замедление, поставить стенку на поле, и что-то еще. Помню что было 5 видов, но забыл что было пятое. Это была моя первая задача, поэтому пришлось еще изучить и проект. Справился я помойму где-то за месяц с этой задачей, хотя по мере развития проекта, что-то там еще дорабатывалось. 

После этой задачи пошли уже всякие рутиные дела - рисовали меню, делали мультиплеер, улучшать код и т.п. Но была задача которую я вызвался сам делать. Щас расскажу немного за архитектуру :) Был в этом проекте один заголовочный файл, с названием не помню каким, суть которого была следующая - он подключал почти все заголовочные файлы проекта. Ах да язык С++, заголовочный файл это файл с расширение .h/.hpp в котором обычно описывается информация о классе, без её реализации. И я увидев это, загорелся желанием убрать столь ужасное решение. То, что это плохо согласились все, но как говорится идеи должны быть наказуемы - исправлять проблему пришлось одному.
Потребовало это уйму времени, в добавок пришлось еще по дороге разделять некоторые файлы на части, и решать циклические зависимости. Но результат стоил того.

Как часто вы можете назвать свои достижения в цифрах? Вот в данном случае я могу. Время сборки проекта с 10-11минут уменьшилось до 2-2.5минут. То есть сборка ускорилась в 4-5 раз с нуля. Про инкрементальную вообще молчу - очевидно, что до этого такого понятия можно считать не существовало - ибо проект почти всегда пересобирался целиком. После такого изменения инкрементальная сборка стала работать как надо.

Также я в проекте неплохо так оптимизировал дубликацию кода, и объединение похожих участков в функции/классы. Но не помню уже численные показатели сего изменения. Конечно я и добавил фич: магия, сетевая игра, обновленное меню.

Думаю у многих возникло ощущение, что это было на последних курсах университета, и проработал я там больше года. Но это не так. Это было после первого курса университета, С++ я учил самостоятельно во время первого курса, и проработал я всеголишь пол.года. Причина ухода была простой - почти все ушли, и стало скучно. Как оказалось, мало кто способен сочетать учебу и подработку.

Что я вынес с этой работы? Это был первый опыт работы с более/менее средним проектом, опыт работы в команде, с С++. И я оценил насколько архитектура влияет на сборку. 

Кто-то скажет - ну у нас языки современные, там нет деления на hpp/cpp файлы, и всё это не важно. Спешу огорчить - проблемы теже самые, просто многое скрыто под коробкой, и не всегда можно очевидно сказать, что от чего зависимо.

# Появление своей компании, или зимняя школа программирования

Летом после второго курса судьба не сложилась, и я никуда не пошел работать. Но зато зимой я наверстал упущенное с лихвой.

И так 3 курс, закончился первый семестр, экзамены. Один экзамен я уже не сдал, под полное счастье не сдал даже на пересдачи, и пришлось идти брать повторную пересдачу. Забегая вперед, на повторной пересдачи я сдал на  его на 4. Но не это важное. Важно другое - зная, что мне надо готовиться к повторке, один из моих однокурсников/друзей, мне предлагает - там зимняя школа программирования начинается, не хочешь сходить? Я немного поломавшись, сказал Да, и считаю, что это было самым верным решением.

На зимней школе программирования был выбор чем заниматься, мы с другом решили пойти в мобильную секцию. Там учили языку Obj-C под iOS, и надо было за 2 или 3 недели сделать свою игрушку в команде. По началу мы были в команде из 5 человек, и делали некоторое подобие арканоида. Но в первую же неделю, мы не смогли определится как будет выглядеть игра, и команда развалилась. Мы с другом начали делать своё, а остальные три человека своё.

Игра получило название "вандал" и суть была её следующая - человечек внизу экрана стоит с рогадкой, и стреляя из нее сбивает разные предметы находящиеся на полках. Игра была с физикой, но на тот момент были еще без веревок. Под конец зимней школы, друг привлек свою девушку, и она нам нарисовала хоть какие-то картинки под это всё. Код при этом к игре писал я почти один, а друг тем временем занимался продажей души дьяволу... Ну точнее это дьявол ему душу по итогу продал.

В общем пока я в одного делал игру, которая конечно же выиграла среди конкурса проектов внутри школы, мой друг в одного сумел найти нам продюсера и инвестора в одном лице. Это был один из менеджеров компании [Alawar](https://www.alawar.ru/) и на тот момент компания пробовал новый формат - внешние студии разработки.

Дальше все завертелось закрутилось, и в итоге появилась компания Grizzly-jr, со следующим штатом:
- Мой друг как директор, человек по документам, и договорам, ну и частично геймдизайнер.
- Я как программист, и тоже частично геймдизайнер.
- Девушка друга, как помошник нам с картинками. Позже она бросила основную работу, и стала рисовать картинки на постоянке.
- Alawar - наш продюсер, и инвестор. С ними у нас был заключен договор, вида "они нам ЗП, и выпуск, мы им доходы от продаж - причем первую часть денег 100% им"

# Grizzly-jr (2.5 года, C++/Obj-C, iOS)

Вот с этого момента я считаю это коммерческим опытом. 

## Robber Rabbits

Первая наша игра была [Robber Rabbits](https://www.youtube.com/watch?v=qHjqc9IIje8) - по сути это был переработанные и улучшенный "вандал". О самой игре можно почитать в интернете, несмотря на возраст, данных об игре сохранилось достаточно много.

Первую версию мы делали 3-4 месяца. Она включала в себя три магазина (три локации), на каждой по 24 уровня. В прочем это можно и так найти. Давайте к разработке.
Основные сложности/задачи в игре были следующие:

1. Сделать веревки. Посмотрите видео, и оцените какие они классные. Если вы думаете, что это простая задача, то почитайте вначале [это](https://habr.com/ru/post/135338/). В статье все "просто", по факту человек не разобрался с темой - он сделал упрощенную версию, и решил, что между 80% и 100% разница не столь велика. Во первых кривая безье ведет себя не так как нужно. Поэтому и у нас и у Cut the Rope, это скажем так модифицированная кривая безье - принцип тотже, но не более. Во вторых в статье человек воспользовался antialias, которого мы себе позволить не могли. По факту каждый сегмент веревки это 6 маленьких треугольников. 2 Треугольника - центр веревки, и по 2 треугольника используется для сглаживания - так-как треугольники OpenGL умеет рисовать с прозрачными вершинами, и с плавным переходом. Понятное дело, все эти треугольники надо еще правильно соединять - это всеже не просто кривая из N точек. Если кривая гнется, то треугольники внутри радиуса сокращаются, а снаружи растягиваются. При этом при сокращении не должно возникнуть случайно "отрицательных" координат. Еще в статье не упоминается производительность. Мы у себя старались не делать длинных веревок (но есть уровни и с длинными), а вот у Cut the rope я думаю это была одна из важнейших задач. Но могу сказать так - количество звений в физическом мире делалось сильно меньше, чем можно себе увидеть при визуализации. Просто при визуализации, добавлялись "виртуальные" звенья.
2. Редактор уровней и предметов (ведь они тоже разной формы/весом/упрогостью). Он был написан на Java. Чесно скажу - это была плохая идея делить редактор и игру. В будущих играх мы это учли. Но зато он был быстро написан, но пользоваться было не очень удобно: приходилось сохранять уровень, скидывать на телефон, и смотреть в игре как же оно себя ведет.
3. Интеграция/Ачивки. Что же в этом сложного? Ну первый раз все сложно :) А так ачивки, это не прям то что лежит на поверхности. Ну например ачивка на подобии "сделать 10 выстрелов из ружья на N уровне" - подобная ачивка означает необходимость вести счетчик, проверять уровень, проверять тип оружия и т.д. В общем для ачивок, была сделана отдельная подсистема, где все события записывались, и потом анализировались. Это позволило создавать ачивки гибко, и быстро.
4. Телепорт. Ух... Вы не представляете как сложно в физическом мире переместить предмет из одной точки в другую, с сохранение инерции, но с возможной сменой направления. По итогу предмет удаляется в физическом мире, у него сохраняются все основные его характеристики, и потом создается в другом месте, а характеристики нельзя просто присвоить (скажем спасибо Box2d), поэтому чтобы присвоить характеристики, надо было научится "бить" по предмету, чтобы он получил импульс эквивалентный прошлому.
5. Загрузка сцен. Это щас нам можно куча картинок загрузить в память, так что пользователь даже не заметит. Но не тогда. Во первых было ограничение на размер занимаемой памяти при 60мб apple с 80% вероятностью выгружал приложение из памяти. Ну и чем больше, тем шанс выше. В идеале не занимать больше 50мб. Поэтому загрузить все картинки которые есть в игре сразу в память не представлялось возможным. Конечно проблему можно было решить сделав графику по проще/меньше, но мы не ищем легких путей. Поэтой самой причине, мы загружаем и выгружаем набор картинок при переходе со сцены на сцену, чтобы вписываться в 50-60мб. Но так-как этот процесс занимает 2-3 секунды, то появились "шторки". Посмотрите видео. Там видно как по нажатию на кнопку вначале закрываются, а потом открываются зеленые шторки. Они нужны были, чтобы замаскировать момент смены ресурсов. Так пользователь думает, что это просто анимация, а не то, что там происходят тяжелые дейтсвия под капотом.

Конечно по мере развития игры, появлялись новые игровые предметы. Например последний был "осы" - они вылетали из улья, и летели за главным предметом "морковным мороженным". И их надо было сделать умными. При этом не сильно умными, достаточно предсказуемыми, и желательно, чтобы они не тратили много времени на поиск пути. Алгоритм у них конечно движения простой по итогу - лететь к мороженному по прямой, а если они ударились, то лететь или со смещение вправо или со смещение влево. Сами осы еще при рождении были правые и левые :) Конечно лететь "вправо"/"влево" это легко звучит, а по факту чуть сложнее так-как есть гравитация, предметы могут быть накланены, но сути это сильно не меняет.

Игра получилась хорошей, мы смогли получить более миллиона скачиваний, даже без большой рекламы со стороны Alawar. Под счастье нас зафичирил Apple, и это сильно помогло. Но игру постигла тяжелая судьба. Тот случай, когда лучше бы и не рекламировали. Alawar во франции решил прорекламировать игру, и сделал стенд с нашей игрой. К большому сожалению, кто-то зачем-то упомянул ubisoft на этом стенде. А у ubisoft тоже есть белые кролики из игры rayman. В общем ubisoft об этом прознали, и подали в суд. Apple сразу удалил игру из AppStore, а Alawar сдалось сразу - в прочем оно и понятно, размер фирм очень разный, не в пользу Alawar.

Итог права на игру отдали по итогу полностью нам (до этого по договору, права принадлежали Alawar), так-как чесно признали это их косяком. К сожалению, мы так и не перевыпустили игру с названием RobberBears с чудесной историей, как же кролики стали мишками, и кто им обрезал уши :)

## Cute Heroes

Это на самом деле не следующая наша игра, но следующая игра которая вышла в AppStore. Называлась она [Cute Heroes](https://megaobzor.com/Cute-Heroes---velikolepnaya-strategiya-na-iOS.html) и несмотря на то, что она вышла на два года позже первой, по ней информации в разы меньше. Игра не получила своей славы, хотя и бесспорно в нее играли. 

Как я считаю основная причина её провала, была в том, что после утверждения геймплея и разработки игры на 50-60%, у нее 3 раза этот самый геймплей менялся. В итоге несмотря на очень много шикарных технических решений, хорошую картинку, и даже стабильность после хотфикса (первая версия, крашилась из-за алгоритмов шифрования данных, и пришлось в срочном порядке это править), геймплей получился не сбалансированный. Вещи дающие какие-то плюки были несуразные, сами войска (особенно те, что открывались в самом конце) были плохо сбалансированные. В добавок сетевая игра 1на1 тоже частенько глючила.

Но если бы геймплей был бы согласован сразу быстрее, или после самой последней идеи геймплея, нас бы не поджимали со всех сторон по срокам, думаю игра бы получилась в разы более удачной. Потому-что даже с плохим балансом, я и знакомые могли в неё зависать на долго. Не ради прогресса, а ради картинки и наблюдением за юнитами - то как юниты сами бегали, выбирали цель, и как это всё анимировалось было чудесно. 

У игры было много хороших технических решений:

- Для описания юнитов был применен КОП, а не ООП. То есть был класс Unit, и он просто конфигурировался - задавался класс отвечающих за атаку, за движение, за магию, настройки и т.п. В итог все юниты имели одинаковый обработчик, но могли очень гибко и быстро меняться.
- У нас был очень классный рандомный подбор герба. К сожалению на видео из youtube это не увидишь, но у нас случайным образом создавался герб состоящий из 2-3 цветов, и это всегда выглядело хорошо. Для этого конечно пришлось изучить и сочетание цветов, и разные цветовые палитры, и долго подбирать значения, но оно того стоило.
- Движение юнитов - оно было основано на матрице действий - у каждого юнита были описаны матрицы, который говорили вероятности из одного состояние перейти в другое, и состояний атаки было несколько: атака по ближнему юниту, атака по дальнему, атака по хилеру. Ну и понятное дело матрицы перемножались, расчитывались для разных вражеских юнитов, учитывалось и расстояние, и хп, и другие показатели. В общем юниты были очень умные и специализированные. Оно работало так круто, что юниты в какой-то момент начали двигаться не предсказуемо и неожиданно для меня, но при этом крайне логично и умно. Несколько примеров:
* Некоторые быстрые юниты имели приоритет на хил/лучник. Так вот они умудрялись оббегать толпу юнитов ближнего боя и убивать хил/лучника.
* Хилеры старались держаться всегда позади других юнитов, но если нет опасности могли подойти поближе, и полечить тех, кто вырвался вперед.
* Лучники отбегали назад, и старались спрятаться за спины милишников.
И всё это без специализированных if-ов - чистая математика со сложением и перемножением. Выглядело это круто.

Но игра продается целиком, а не только отдельные технические решения, и всеже багов и недоделанного баланса войск было много, что привело её к грусному финалу.

## Не выпущенные игры

А таких было много. Причем одна игра была на 100% готова, но её так и не издали.

После Robber Rabbits мы начали писать новую игру. Не помню название, но там были мышки против сов. Это игра была игрой головоломкой - были различные прямоугольные/круглые блоки в виде мышок, сов и еще животных шахтеров (не помню кто это был). Задача была удалить часть шахтеров таким образом, чтобы все совы упали за пределы карты, а мыши наоборот остались. Игра технически была сделана очень грамотно - уже не было глупых ошибок после Robber Rabbits. Редактор был прям в игре, с возможностью не отходя от кассы проверить уровень. Пожалуй самой сложной задаче в игре было это научится создавать красивые фигурки любого размера - ведь блоки могли тянуться как угодно, и картинку совы/мыши/шахтера надо было под этот размер адаптировать, чтобы и пусто не было, и растяжений не было.
Игра была полностью сделана, была интеграция с различными сервисами, в общем хоть бери и выпускай, но в тот момент у alawar начались проблемы, и эту игру начали кидать от одного к другому продюссеру, и как итог игра не вышла в свет.

Параллельно с этим, мы написали простой раннер, в хэлуин тематике. Там нужно было прыгать на тыкве, и в зависимости от каких-то факторов прыжок или уменьшался, или увеличивался. Игра была сделана только как прототип, и никуда сильно не продвинулась.

Зато появился новый раннер - В нем пчелка летела в туннеле, тунель соответственно был не ровным, с различными препятствиями. Вообще основная фича игры была таже самая что и tiny wings, а именно красивая картика. Ланшафт, фон, и цвет тунеля генерировались на ходу, имели тоже плавные изгибы, менялись со временем. В общем можно это назвать было в плане графики tiny wings, но только в туннеле :) 
Игра не получила никакого идейного геймплея - то есть да можно было лететь в туннеле, туннель становился сложнее, цвета менялись и т.п. но зачем летишь, куда летишь, и т.п. так и не проработали.

Было еще пару мелких недоделок, я уже не помню даже о чем. 

Но была также и еще одна шикарная игра, более того сейчас, смотря на то какие игры появлялись в следующие года после того как мы ракрыли фирму, мы бы явно с той игрой попали в тренд, да и даже по сей день подобные игры пользуются популярностью. И так игра была соединением всех знаний полученных до этого, в ней было очень много красивых и дизайнерских и технических решений. 

Что же это за игра - это были 2.5д гонки, но не обычные гонки, а гонки на машинках которые ты мог собрать сам из балок, моторов и т.п. Да над реализацией возможности собирать свою машину, которая бы не разваливалась на ходу из-за физики, при этом учитывала что только от мотора могут крутиться колеса пришлось сильно попотеть. В прочем и над реализацией движения/карт тоже. Как и в tiny wings карты были красивые, плавные и т.п. но уже генерировались не случайно, а в виде массива вершин. Вид был сбоку. но почему я пишу 2.5д? во первых сами машины были с тенями, и картинка машинки раздваивалась со смещением - выглядело так, что она не плоская. Во вторых все противники ехали какбы на заднем плане, они и не отвлекали, и ты мог понимать где кто находится. В третьих это различные паралакс эффекты, насколько я помню было 5-6 слоев.
В игре была даже запись. Почему даже? А попробуйте записать в физическом мире так, чтобы оно воспроизвелось с точностью как было до этого, и не потратив на это 100мб/гб памяти :) Ну то есть скажем так там была золотая середина между записываем только действия пользователя, и записываем положение каждого элемента машинки в каждый тик.
Игра осталась "прототипом" - то есть опять же без сценарий, но с очень хорошо продуманной механикой - то есть мы между собой соревновались кто быстрее, делали карты, и все работало хорошо. И даже обменивались созданными машинами.



В общем хорошие были времена, мне нравилось делать такие игры - постоянно что-то новое, сложное и т.п. Основной причиной почему мы закрылись я считаю не умение делегировать обязанности в том возрасте. Мы хотели делать всё сами, никогому не доверяли, и в добавок имели уровень скиллов на много выше чем у среднего студента. Но всё это привело к тому, что за всё время мы только три раза нанимали людей, и только один худохник остался с нами до конца - очень хороший художник.

# HD Soft 

После того как компания была закрыта, я устроился устроился С++ программистом, в достаточно специфичную компанию. Специфичную, так-как они занимались написание софта под коробки с цифровым телевидением в Америке. Правда как цифровым - кабель то был обычный телевизионный, а не ethernet, но почему-то коробочка называлась цифровым телевидением.

Проработал я там не долго, так-как ушел в армию, но! научился я там очень многому. Немного расскажу о продукте: Это был софт поверх процессора, скажем так система, которая работает с данными для телевидения. Основной критерий был это качество - коробочка должна была проработать ближайшие 3-5 лет без сбоев у 1млн-2млн пользователей. Компания делает подобное не первый раз, поэтому с тем как писать такой софт уже знала.

Я же благодаря этой компании смог сильно упорядочить свои мысли, и поднять уровень написания кода. Как давно вы писали софт в котором нет багов? Вот этот софт был именно таким. Может кто-то читал книжки где фигурировали фразы "программист в год пишет 5-6тысяц строк кода", и не понимали как это? Я вот щас на iOS пишу 5-6к строчек готового кода (который будет выпущен) в месяц, а если брать сколько переписываю так и вообще цифры будут огромными :D А в книжках за год столько. Вот в этой компании за год именно столько и писал программист. Почему?

Давайте немного уйдем в важный нюанс процесса: Code review 100-200 строчек кода мог проходить месяцами, до тех пор пока все названия не будут обозначать однозначно, то что они делают, без побочных эффектов, и написанные максимально просто. Я даже помню как меня заставили строчку на 50 символов переписать на более короткий вариант - я долго думал как короче... а ведь и правда нашелся вариант в 20 где-то.

И да любители TDD и т.п. - что у вас код без багов? Ага как-же, как-же :D А вот там код был близок к понятию без багов, но тестов почти не было - проверялось только то, что софт запускается и работает, но прям кучи тест кейсов не было.

Конечно надо понимать важное отличие - тут писали ядро, которое не имеет никаких прослоек - язык + процессор и ничего больше. А большая часть пишет используя библиотеки/систему где уже есть баги, которые часто приходится как-то решать когда пишешь свою программу, в которой тоже будут баги, из-за того что дедлайн уже вчера.

Это к слову сказать, а раньше трава была зеленее. К сожалению она реально была зеленее - в 2000 годах средний программист это суровый дядька с хорошей мат базой. Сейчас (202x) средний программист это "хипстер" который без библиотеки не найдет максимум в массиве. Но такова реальность - основной процент софта пишется мало качественно и быстро, так-как иначе пока будешь писать качественно уже другие напишут не качественно и отвоют рынок. Как итог имеем повсеместный софт, от которого хочется комп выкинуть в окно, так-как снова что-то глючит/лагает/падает работает через пятую точку :D Но ладно об этом как-нибудь в другой раз.

Что я делал на проекте? Я писал обработчик каналов - то есть алгоритм который отрабатывает при запуске коробочки/телевизора и выдает информацию о доступных каналах, о программе на день, и что сейчас идет по тому или иному каналу. И да это вам не REST api где всё просто. В телевизионном кабеле нет понятия запрос - там направление данных одно - от сервера к клиенту. Поэтому "список" каналов постоянно циклически передается на определенной частоте. Но и списка там не было как такового. Я не помню что там было, но помню, что что-бы убедится в том, что все данные собраны, надо было собирать данные из трех источников и постоянно их валидировать. Отчасти это надо было делать, из-за того, что не понятно где какой пакет - нам просто идут некоторые данные, а склеивать их надо самому.

Но а для себя я вынес очень много полезных навыков в написании чистого кода, а также посмотрел на архитектуру ядра - которая отличается от тех, что обычно используется в UI или на сервере.

# Армия

Тут меня забрали в армию. Про армию, причины почему я пошел и т.п. можно будет прочитать [тут](./army.html)
В армии я пробыл год, вернулся из неё и с крайне большим трудом нашел работу.
Зато по возращению из армии, когда меня пнули отовсюду, я вычитал куча книжек и статей - ибо надо было восстановить быстро знания.

# Bricsys/BricsCAD

Устроился я совершенно случайно в эту компанию. Я уже от отчаяния, что меня никто не берет, даже те, кто до армии брали с порога, я решил заняться репетиторством. Так что знайте - репетиторы в программировании это те, кого никуда не взяли :D я шучу, сейчас я тоже репетирую и работаю, но репетирую я уже для души, а не ради денег.

И на моем сообщение о репетиторстве откликнулся человек и предложил пройти собеседование. Я согласился.

На собеседовании мне показали программу... Ну точнее как показали - продемонстировали как она падает :D то, что хотели мне показать так и не запустилось. Спросили меня про скалярное и векторное произведение, и немного по языку С++. И приняли на работу. Я же согласился - жить то надо на что-то...

В общем попал я в компанию, где есть математики, но нет программистов. Это было приблизительно 50 человек, которые писали этот продукт. С функциональной точки зрения продукт крутой, и имеет возможности которых нет в AutoCAD. Всеже математики там были хорошие. Но с точки зрения кода и процессов, это был тихий ужас :)

Вся разработка была в svn (это прошлый git, если кто не застал), ну ладно был в svn - она была в одной ветке :D 50 разработчиков работали в одной ветки, релиз собирались из этой же ветке. К слову сказать были тесты, и порядка 5000, но это не спасало программу от того, что было уйму глюков и крашей. Как мне сказали, у них был специально обученный человек для презентаций, который знал как и куда тыкать, чтобы продукт не падал и всё работало.

В коде был ужас - каждый писал как умеет. Да я не спорю проект огромный, в нем используются не менее огромные библиотеки, но вот я с еще одним молодым человек рефачили один кусочек кода - мы нашли 20 классов размер приблизительно на 200-300 строчек, которые делают идентичную вещь. Причем ладно бы это была копипаста классов, так нет половина из них была явно написана руками, так-как стиль написания кода отличался. Мы конечно же объединили весь этот код, сделав один класс, но это капля в море.

В общем проработал я там не долго. Возможно если бы меня наняли туда сейчас с моим уже большим опытом, я бы там изменил и процессы, и наладил работу с кодом, и наладил качество, но на тот момент я хотел больше развиваться и учиться нежели чем развивать и учить. Да там были отличные математики, но я всеже программист, а не математик, и программирование первостепенно для меня. В общем я ушел, поговорил с директор, объяснил ситуацию, он сказал - так может ты бы и исправил это, на что я сказал, что не готов. 

Проработал я всего три месяца.

# Технологика

И тут начинается мой путь iOS программиста. С++ программистом меня после армии по прежнему не брали, но так-как я знал и Obj-c (кстати его я не люблю), то вот навыков на iOS программиста мне уже начало хватать, чтобы меня брали, и даже в разные места. Поэтому открыто заявляю - iOS программисты тупее С++ :D Это конечно шутка, но в каждой шутке доля правды.

Я выбрал эту компанию, не по уровню ЗП, а так-как в ней работал мой бывший преподаватель из университета, который то меня и учил писать код. И я решил, что это отличный спопоб что-то вспомнить и научиться. К слову сказать не прогадал - на самом деле я его смог уговорить, чтобы он и лекции читал iOS команде, и код посматривал, и советы давал.

В этой компании было много проектов, некоторые даже долгие. Я много чему научился, и вынужденно стал лидом (так-как надо было делать новый проект, а я оказался самым ответственным и в итоге направлял команду, отвечал за архитектуру/код/команду), несмотря на то, что в компании я был не дольше всех. Собственно говоря чтоб меня будучи С++ программистом с опытом даже в 3 года сделали бы лидом... ага какже какже. Это даже на мидл уровень по меркам С++ не тянет :D

В общем я участвовал/руководил/делал сделующие проекты:

## TAO Variobics

Проект где ты давишь на какую-то bluetooth штуку, и она измеряет силу нажатия. И там были какие-то упражнения с ней. Почему-то не смог уже найти этот проект в google, возможно закрылся, но он просуществовал достаточно долго лет 10 точно. Это был долгий проект, компании им занималась до меня, и после меня. Что мне на этом проекте нравилось, так это ТЗ - заказчики были очень классные и даже рисовали UML диаграммы для описания, что они хотят.

В этом проекте я его несколько раз рефачил - исправлял какие-то проблемы или подгонял под новые требования. Делал TAO SDK - библиотеку для взаимодействия с этим устройством, чтобы игры могли им пользоваться. Делал "геймификацию" - в общем чтобы был не просто график с точкой, а чтобы машинка/лыжник ехали по дороге/трассе.

## t-tronic

Информацию о проекте можно найти по сей день. Это агрегатор мастерских, по принципу - не ты ищещь, а тебя ищут. То есть приходит пользователь, указывает какие у него есть проблемы у машины (там был большой чек лист, кроме обычного описания), а различные СТО говорят за сколько приблизительно смогут починить машину. Потом он едет на СТО, машину смотрят, выставляют уже конечную цену, и всё это через приложение.

Моя роль тут была именно как архитектора/лида. Что могу сказать - проект можно считать успехом с технической стороны, так-как мы его завершили в срок, в нем не было найдено багов, и главное так-как мы разрабатывали даже чуть раньше чем бэкенд, то андройд команда постоянно спрашивала нас, а что же изменилась на бэкенде, так-как на iOS мы написал тесты. А вы думали я против TDD? :D Я лишь против того, что люди считают это панацеей, ибо TTD само по себе это удорожание разработки, и ни капли не улучшение качества софта. Но есть ситуации и люди где TDD работает.

Такая ситуация была и у нас - мы начали писать проект на две недели раньше появления дизайна и на месяц раньше появления бэкенда. Поэтому мы за две недели смогли продумать архитектуру, написать тесты на бэкенд логику (то есть на данные), что в конечном итоге дало огромный буст, позволив завершить проект не просто в срок, а даже раньше, и в добавок еще помогать андройду в плане бэкенда.

Проект мы писали в 4 человека (на iOS) три месяца. Как я писал получилось очень даже не плохо, а если учитывать, что лид/архитектор это человек с 3-4годами коммерческого опыта, то и вообще шедевр :)

К сожалению дальнейшую судьбу проекта я не знаю. Пользуются им или нет, переделывался код или нет и т.п.

## Сигнализации

Не помню для какой фирмы (я в тот момент не имел прав, и мне были машины безраличны), то мы делали приложение для сигналок. Ну точнее как - приложение нам передали, мы его рефачили, улучшали функционал, но большую часть времени занимались брендированием. Собственно говоря ради этого и рефачили - чтобы любой новый бренд можно было добавить за 1-2 дня.

А что тут сказать - начинал проект я, потом его передали для того, чтобы он брендировал другому разработчику.

## Aether

Это внутренний проект компании. Лента сообщений, но привязанных к локации. То есть ты идешь и видишь кто, что пишет в радиусу 1-10км от того места где ты. Использование для различных отзывов, особенно в местах туризма. Вышел так, открыл приложение - открыл AR и посмотрел, что вон в том направлении в 2км от тебя писали много отзывов хороших о каком-то объекте.

Что я по нему делал... вначале дорабатывал первую версию, правил баги, занимался выпуском, а также делал эту самую AR чтуку. В те времена это было крайне сложно, ибо библиотек не было, телефоны еще слабые, а попробуй размести 100 сообщений вокруг человека, чтобы они не пересекались, и всегда можно было понять куда идти, ну и в реальном времени работали.

Потом был еще один проект Aether 2.0 который мы писали на Xamarin. Кстати говоря технология мне понравилась, но IDE и количество багов в те времена были нереальные. Не знаю как сейчас, но в то время дебаг отваливался через 5 секунд после отстановки на брейкпоинте - что успел посмотреть, то успел.

## Другое о компании

Да были и еще проекты, я всех не помню. Был какой-то проект опросник, проекты на ionic и cordova. Но лучше их не вспоминать...

Самое важное что я получил в компании, так это наставничество. Я постоянно просил преподавателя помочь, посоветовать, рассказать о чем-то. Также он меня учил собеседовать людей, так-как после того как я проявил лидерские качества, меня и к поиску кандидатов подключили и я стал собеседовать. Эх хорошие были времена... тогда каждый умел на листочке находить максимум в массиве и решать более сложные задачи, не то что щас...

В компании мне понравилось как было все устроено - были достаточно хорошие ТЗ, сроки согласовывались с разработкой, было хорошее тестирование, с документацией и тест кейсами. Но в какой-то момент я осознал, что способен на большее, да и ЗП мне тут больше не дадут, а в других местах дадут.

В итоге ушел я по двум причинам:

- Когда появился swift (второй версии на тот момент), никто из моей команды не захотел его учить, и мне стало одиноко - я пытался подбить людей, но они не хотели развиваться.
- ЗП в рамках этой компании мне бы не подняли выше.

# Тензор

Поэтому я нашел компании где и swift, и ЗП, и даже команда. Я досихпор общаюсь с людьми из Тензора, и в общем счете у меня положительные впечатления о компании, а о причинах ухода попозже. 

Меня взяли на должность ведущего, и я был первым iOS разработчиком в Новосибирске, и вторым человеком в офисе академгородка. Как мне любит говорить HR из этой компании - "ты был у меня самым молодым ведущим за всё время".

Собственно говоря, занимался я в компании всем:

- Писал код, в больших объемах.
- Внедрял свою библиотеку DITranquillity за место старого Typhoon. Все таким переходом остались довольны.
- Обсуждал архитектурные решения, рисовал UML диаграммы.
- Вёл лекции и обучал iOS программистов.
- Не я был инициатором, но я был активным "ведущим" - мы в фирме решали различные задачки, и потом разбирали решения людей, и то как это надо было бы решать.
- Собеседовал людей.
- В этой компании я впервые выступил на конференции (не считая выступлений от университета)
- Отстаивал интересы команды.

По итогу за 2 года, что я проработал в Новосибирске появилось 7 iOS разработчиков (собеседовал их я на пару с руководителем мобильной разработки), и команда в Новосибирск стала по размерам похожа на команду в Уфе (где и была изначально iOS команда). Некоторых из них работают по сей день, на высоких должностях.

Обучал людей, за что мне благодарны наверное многие, и многие сейчас иногда говорят - "жалко, что такого у них больше нет". К слову сказать я не только сам вел лекции, а также иногда находил желающих говорил им разобраться в теме, и этот человек потом тоже что-то рассказывал.

По поводу задачек - щас набегут всякие с фразами "олимпиадное программирование не нужно", "алгоритмы не нужны" и т.д. Но все с радостью их решали, и их код от этого становился лучше. Более того один человек сам взял и прочитал/прорешал всего Кнута первый том, и ему это помогло - после этого он поднялся на голову в решении задачек, да и в обычном коде всё стало лучше.

На самом деле были отличные времена. У меня воспоминания такие-же как и от времени когда я писал игры - только хорошие.

Но были... были до момента пока в разработку не вмешался С++. Тут я даже наверное отдельную историю всего моего негодования могу буду написать... Против самой идеи объединить логику с использованием С++ я ничего против не имел. Хоть и считал, что на этом проекте оптимальнее это сделать на бэкенд, так-как логики клиентской не так уж и много, но клиентская всеравно была, да и бэкенд был не заточенный под мобилу, поэтому не идеален.

Проблема была в том, что они не написали бизнес логику общую на С++, а затащили монструозную платформу с бэкенда. Это С++ проект на бэкенде которому уже было 10+ лет, и который был написан студентами со всеми вытекающими. В добавок С++ там были не настоящими - они не знали что такое UB, не читали никогда стандарты, и были не вкурсе, что оказывается кросплатформенный С++ это не тоже самое, что С++ на одном только бэкенде. Кстати говоря первый релиз с С++ либой увеличил размер приложения в два раза. Ибо либа огромная.

Самый больших их фейл, это логин - у нас iOS джун в одного всю авторизацию целиком с UI написал за месяц. С++ команда из трех человек, без UI не смогла справиться с этим в течении полугода, после того как подменила iOS реализацию на C++, сколько они до этого делали я не знаю. Как итог у нас пол года не было выпуска приложения, и пол. года разрабатывать приходилось через костыли, чтобы хоть как-то залогинится.

И такое качество было постоянно, да конечно сейчас спустя кучу времени они наняли толковых С++ разработчиков, которые стали хоть как-то это всё править. Но на тот момент я лазил в С++ код, и указывал С++ разработчиком где у них баги, объяснял почему... Да я конечно бывший С++, но бывший - три года к тому моменту я не писал уже на С++.

Да когда это всё начиналось, мы отбивались, предлагали другое решение руководству - даже некоторые решения делали для демонстрации, что они работают, но нас так не услышали. Я лично говорил такую фразу - "окей раз так сильно хотим С++, то давайте без `платформы` - пусть С++ делает только бизнес логику, а инструменты для сетевых запросов и хранения предоставляет iOS и android через интерфейсы/протоколы". Была бы легковесная С++ бизнес логика, которая бы занималась только логикой, а не всем на свете. У них БД даже самописная была, причем такая крутая - без атомарности...

В общем именно это послужило причиной ухода. Я понял свою беспомощностью на по факту своем же проекте - всё стало завязано на низкокачественный С++ код, в купе со слабыми С++ разработчиками. А С++ какбы это не игрушка - это сложнейший язык, особенно при кросплатформе, в котором можно ногу себе простреливать каждую секунду.

Ну такова особенность работы в Тензор - директор может навязывать свое мнение. Не я его понимаю - это его компания, он имеет на это полное право, но как говорится хороший руководитель, тот кто доверяет своим подчененным, и говорит им что нужно сделать, а не как. Но зато с ним можно поообщаться на повышенных тонах и даже с матом, и это скажем так будет нормой.

Вообще если честно оглядываясь назад, я понимаю, что надо было просто ехать в головной Офис, и общаться лично с директором, с руковдителем С++ команды. И тогда бы возможно удалось бы изменить вектор развития проекта. Но а теперь уже поздно. К слову сказать, я же попозже вернулся в Тензор, и всеже кое-что сделал, но об этом позже.

В добавок в тот момент времени, меня постиг финансовый крах моей жизни. Не ЗП у меня была нормальная, я из-за семейных обстоятельств (не из-за жены), и своей вспыльчивости, наломал дров, которые убили мою инициативность, и самооценку достаточно сильно, и это тоже могло повлиять на решение ухода из тензора.

# ЦФТ

Пока не дописал :)